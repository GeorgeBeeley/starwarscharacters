import{u as R,r as v,m as S,d as g,c as a,a as n,i as t,t as c,j as u,e as y,F as f,k as x,o,n as D,v as V,b as k}from"./index-BOUp8Irg.js";function C(){const p=S(),s=R(),r=v(),e=v(""),i=v([]),w=v([]),h=v([]);async function m(l){return await(await fetch(l)).json()}const b=async()=>{const l=p.params.id;r.value=s.getCharacter(l),r.value??(r.value=await s.fetchCharacterById(l))},_=async()=>{if(!r.value)throw new Error("Failed to load character.");try{if(r.value.homeworld){const l=await m(r.value.homeworld);e.value=l.name}if(r.value.films.length){const l=await Promise.all(r.value.films.map(m));i.value=l.map(d=>d.title)}if(r.value.vehicles.length){const l=await Promise.all(r.value.vehicles.map(m));w.value=l.map(d=>d.name)}if(r.value.starships.length){const l=await Promise.all(r.value.starships.map(m));h.value=l.map(d=>d.name)}}catch(l){console.error("Failed to fetch character details:",l)}};return b(),_(),{self:r,homeworld:e,films:i,vehicles:w,starships:h}}const F={key:0,class:"text-center py-20 text-2xl font-bold tracking-widest"},B={key:1,class:"max-w-4xl mx-auto bg-black/50 p-5 md:p-10 rounded-2xl shadow-2xl backdrop-blur-md border border-yellow-500"},E={class:"text-3xl md:text-5xl font-extrabold mb-10 text-center tracking-wider uppercase"},P={class:"grid grid-cols-1 md:grid-cols-2 gap-8 text-lg leading-relaxed"},T={class:"mt-12"},j={class:"list-none pl-0 space-y-2"},H={key:0,class:"italic text-gray-400"},L={class:"mt-12"},U={class:"list-none pl-0 space-y-2"},I={key:0,class:"italic text-gray-400"},M={class:"mt-12"},O={class:"list-none pl-0 space-y-2"},G={key:0,class:"italic text-gray-400"},J=g({__name:"CharacterProfile",setup(p){const s=C();return(r,e)=>n(s).self.value?(o(),a("div",B,[t("h1",E,c(n(s).self.value.name),1),t("div",P,[t("div",null,[e[0]||(e[0]=t("span",{class:"font-bold text-white"},"Height:",-1)),u(" "+c(n(s).self.value.height)+" cm ",1)]),t("div",null,[e[1]||(e[1]=t("span",{class:"font-bold text-white"},"Mass:",-1)),u(" "+c(n(s).self.value.mass)+" kg",1)]),t("div",null,[e[2]||(e[2]=t("span",{class:"font-bold text-white"},"Hair Color:",-1)),u(" "+c(n(s).self.value.hair_color),1)]),t("div",null,[e[3]||(e[3]=t("span",{class:"font-bold text-white"},"Skin Color:",-1)),u(" "+c(n(s).self.value.skin_color),1)]),t("div",null,[e[4]||(e[4]=t("span",{class:"font-bold text-white"},"Eye Color:",-1)),u(" "+c(n(s).self.value.eye_color),1)]),t("div",null,[e[5]||(e[5]=t("span",{class:"font-bold text-white"},"Birth Year:",-1)),u(" "+c(n(s).self.value.birth_year),1)]),t("div",null,[e[6]||(e[6]=t("span",{class:"font-bold text-white"},"Gender:",-1)),u(" "+c(n(s).self.value.gender),1)]),t("div",null,[e[7]||(e[7]=t("span",{class:"font-bold text-white"},"Homeworld:",-1)),u(" "+c(n(s).homeworld),1)])]),t("div",T,[e[9]||(e[9]=t("h2",{class:"text-3xl font-semibold mb-6 border-b-2 border-yellow-400 pb-2"},"Films",-1)),t("ul",j,[n(s).films.value.length===0?(o(),a("p",H,"None")):y("",!0),(o(!0),a(f,null,x(n(s).films.value,i=>(o(),a("li",{key:i,class:"flex items-center gap-2"},[e[8]||(e[8]=t("span",{class:"text-yellow-400"},"•",-1)),u(" "+c(i),1)]))),128))])]),t("div",L,[e[11]||(e[11]=t("h2",{class:"text-3xl font-semibold mb-6 border-b-2 border-yellow-400 pb-2"},"Vehicles",-1)),t("ul",U,[n(s).vehicles.value.length===0?(o(),a("p",I,"None")):y("",!0),(o(!0),a(f,null,x(n(s).vehicles.value,i=>(o(),a("li",{key:i,class:"flex items-center gap-2"},[e[10]||(e[10]=t("span",{class:"text-yellow-400"},"•",-1)),u(" "+c(i),1)]))),128))])]),t("div",M,[e[13]||(e[13]=t("h2",{class:"text-3xl font-semibold mb-6 border-b-2 border-yellow-400 pb-2"},"Starships",-1)),t("ul",O,[n(s).starships.value.length===0?(o(),a("p",G,"None")):y("",!0),(o(!0),a(f,null,x(n(s).starships.value,i=>(o(),a("li",{key:i,class:"flex items-center gap-2"},[e[12]||(e[12]=t("span",{class:"text-yellow-400"},"•",-1)),u(" "+c(i),1)]))),128))])])])):(o(),a("div",F," Loading character... "))}});function $(p){return{id:crypto.randomUUID(),character_id:p,comment:"",rating:0}}async function Y(p){try{const s=await fetch("https://example.com/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(!s.ok)throw new Error(`Failed to submit review: ${s.status} ${s.statusText}`)}catch(s){throw console.error("Error submitting review:",s),s}}const q={class:"max-w-4xl mx-auto pt-12"},z=["placeholder"],A={class:"flex flex-row justify-between py-4 px-2"},K={class:"flex flex-row gap-1"},Q=["onClick"],W=["onClick"],X=["disabled"],Z={class:"pt-8 pb-4"},ee={class:"text-2xl mb-4"},te={class:"gap-y-2 flex flex-col-reverse"},se={key:0},le={class:"flex flex-row gap-1"},ae={class:"mt-2"},oe=g({__name:"ReviewSection",setup(p){const s=C(),r=v(s.self.value.reviews),e=v($(s.self.value.id)),i=h=>{e.value.rating=h},w=()=>{s.self.value&&(s.self.value.reviews.push(e.value),Y(e.value),e.value=$(s.self.value.id))};return(h,m)=>{var b,_;return o(),a("div",q,[D(t("textarea",{class:"w-full mx-auto bg-white rounded-3xl p-4 text-black font-bold","onUpdate:modelValue":m[0]||(m[0]=l=>e.value.comment=l),placeholder:`Review ${(b=n(s).self.value)==null?void 0:b.name}...`},null,8,z),[[V,e.value.comment]]),t("div",A,[t("div",K,[(o(!0),a(f,null,x(e.value.rating,(l,d)=>(o(),a("i",{key:d,class:"pi pi-star-fill text-xl text-amber-500 cursor-pointer",onClick:N=>i(l)},null,8,Q))),128)),(o(!0),a(f,null,x(5-e.value.rating,(l,d)=>(o(),a("i",{key:d,class:"pi pi-star text-xl text-amber-500 cursor-pointer",onClick:N=>i(e.value.rating+l)},null,8,W))),128))]),t("button",{class:"bg-amber-400 text-black font-bold rounded px-4 py-2 cursor-pointer",onClick:w,disabled:e.value.comment===""}," Submit ",8,X)]),t("div",Z,[t("h2",ee,c((_=n(s).self.value)==null?void 0:_.reviews.length)+" Reviews",1),t("ul",te,[r.value.length===0?(o(),a("li",se,"Leave the first review!")):y("",!0),(o(!0),a(f,null,x(r.value,l=>(o(),a("li",{key:l.id,class:"border border-amber-400 rounded-2xl p-5 mb-4"},[t("div",le,[(o(!0),a(f,null,x(l.rating,d=>(o(),a("i",{key:d,class:"pi pi-star-fill text-xl text-amber-500"}))),128))]),t("p",ae,c(l.comment),1)]))),128))])])])}}}),re={class:"m-2 md:p-8 text-yellow-400 font-sans w-full"},ie=g({__name:"CharacterView",setup(p){return(s,r)=>(o(),a("div",re,[k(J),k(oe)]))}});export{ie as default};
