import{u as R,r as m,m as N,d as k,c as r,a as l,i as t,t as u,j as v,f as w,F as h,k as x,o as n,e as S,n as F,v as P,b as $}from"./index-DB0H-S71.js";function C(){const f=N(),s=R(),a=m(),e=m(""),i=m([]),b=m([]),c=m([]);async function p(o){return await(await fetch(o)).json()}const _=async()=>{const o=f.params.id;a.value=s.getCharacter(o),a.value??(a.value=await s.fetchCharacterById(o))},y=async()=>{if(!a.value)throw new Error("Failed to load character.");try{if(a.value.homeworld){const o=await p(a.value.homeworld);e.value=o.name}if(a.value.films.length){const o=await Promise.all(a.value.films.map(p));i.value=o.map(d=>d.title)}if(a.value.vehicles.length){const o=await Promise.all(a.value.vehicles.map(p));b.value=o.map(d=>d.name)}if(a.value.starships.length){const o=await Promise.all(a.value.starships.map(p));c.value=o.map(d=>d.name)}}catch(o){console.error("Failed to fetch character details:",o)}};return _(),y(),{self:a,homeworld:e,films:i,vehicles:b,starships:c}}const V={key:0,class:"text-center py-20 text-2xl font-bold tracking-widest"},E={key:1,class:"max-w-4xl mx-auto bg-black/50 p-5 md:p-10 rounded-2xl shadow-2xl backdrop-blur-md border border-yellow-500"},T={class:"text-3xl md:text-5xl font-extrabold mb-10 text-center tracking-wider uppercase"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-8 text-lg leading-relaxed"},U={class:"mt-12"},j={class:"list-none pl-0 space-y-2"},H={key:0,class:"italic text-gray-400"},I={class:"mt-12"},L={class:"list-none pl-0 space-y-2"},M={key:0,class:"italic text-gray-400"},O={class:"mt-12"},G={class:"list-none pl-0 space-y-2"},J={key:0,class:"italic text-gray-400"},Y=k({__name:"CharacterProfile",setup(f){const s=C();return(a,e)=>l(s).self.value?(n(),r("div",E,[t("h1",T,u(l(s).self.value.name),1),t("div",B,[t("div",null,[e[0]||(e[0]=t("span",{class:"font-bold text-white"},"Height:",-1)),v(" "+u(l(s).self.value.height)+" cm ",1)]),t("div",null,[e[1]||(e[1]=t("span",{class:"font-bold text-white"},"Mass:",-1)),v(" "+u(l(s).self.value.mass)+" kg",1)]),t("div",null,[e[2]||(e[2]=t("span",{class:"font-bold text-white"},"Hair Color:",-1)),v(" "+u(l(s).self.value.hair_color),1)]),t("div",null,[e[3]||(e[3]=t("span",{class:"font-bold text-white"},"Skin Color:",-1)),v(" "+u(l(s).self.value.skin_color),1)]),t("div",null,[e[4]||(e[4]=t("span",{class:"font-bold text-white"},"Eye Color:",-1)),v(" "+u(l(s).self.value.eye_color),1)]),t("div",null,[e[5]||(e[5]=t("span",{class:"font-bold text-white"},"Birth Year:",-1)),v(" "+u(l(s).self.value.birth_year),1)]),t("div",null,[e[6]||(e[6]=t("span",{class:"font-bold text-white"},"Gender:",-1)),v(" "+u(l(s).self.value.gender),1)]),t("div",null,[e[7]||(e[7]=t("span",{class:"font-bold text-white"},"Homeworld:",-1)),v(" "+u(l(s).homeworld),1)])]),t("div",U,[e[9]||(e[9]=t("h2",{class:"text-3xl font-semibold mb-6 border-b-2 border-yellow-400 pb-2"},"Films",-1)),t("ul",j,[l(s).films.value.length===0?(n(),r("p",H,"None")):w("",!0),(n(!0),r(h,null,x(l(s).films.value,i=>(n(),r("li",{key:i,class:"flex items-center gap-2"},[e[8]||(e[8]=t("span",{class:"text-yellow-400"},"•",-1)),v(" "+u(i),1)]))),128))])]),t("div",I,[e[11]||(e[11]=t("h2",{class:"text-3xl font-semibold mb-6 border-b-2 border-yellow-400 pb-2"},"Vehicles",-1)),t("ul",L,[l(s).vehicles.value.length===0?(n(),r("p",M,"None")):w("",!0),(n(!0),r(h,null,x(l(s).vehicles.value,i=>(n(),r("li",{key:i,class:"flex items-center gap-2"},[e[10]||(e[10]=t("span",{class:"text-yellow-400"},"•",-1)),v(" "+u(i),1)]))),128))])]),t("div",O,[e[13]||(e[13]=t("h2",{class:"text-3xl font-semibold mb-6 border-b-2 border-yellow-400 pb-2"},"Starships",-1)),t("ul",G,[l(s).starships.value.length===0?(n(),r("p",J,"None")):w("",!0),(n(!0),r(h,null,x(l(s).starships.value,i=>(n(),r("li",{key:i,class:"flex items-center gap-2"},[e[12]||(e[12]=t("span",{class:"text-yellow-400"},"•",-1)),v(" "+u(i),1)]))),128))])])])):(n(),r("div",V," Loading character... "))}}),g=f=>new Promise(s=>setTimeout(s,f));function q(f){const s=m({id:crypto.randomUUID(),character_id:f,comment:"",rating:0}),a=m(!1),e=m(null),i=m(!1);return{self:s,submitting:a,error:e,success:i,submitReview:async()=>{if(a.value=!0,e.value=null,i.value=!1,Math.random()*10>6){await g(1e3),a.value=!1,e.value=null,i.value=!0;return}try{const c=await fetch("https://example.com/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s.value)});if(g(1e3),!c.ok)throw new Error(`Failed to submit review: ${c.status} ${c.statusText}`);i.value=!0}catch(c){throw e.value="Error submitting review: "+c.message,c}finally{a.value=!1}}}}const z={class:"max-w-4xl mx-auto pt-12"},A=["placeholder"],K={class:"flex flex-row justify-between py-4 px-2"},Q={class:"flex flex-row gap-1"},W=["onClick"],X=["onClick"],Z=["disabled"],ee={key:0,class:"text-amber-500"},te={key:1,class:"text-red-500"},se={class:"pt-8 pb-4"},le={class:"text-2xl mb-4"},ae={class:"gap-y-2 flex flex-col-reverse"},oe={key:0},re={class:"flex flex-row gap-1"},ne={class:"mt-2"},ie=k({__name:"ReviewSection",setup(f){const s=C();if(s.self.value===null||s.self.value===void 0)throw new Error("Character is null or undefined");const a=S(()=>s.self.value.reviews),e=q(s.self.value.id),i=c=>{e.self.value.rating=c},b=async()=>{if(s.self.value)try{await e.submitReview(),e.success.value&&e.self.value&&(a.value.push(e.self.value),g(1e3),e.self.value={id:crypto.randomUUID(),character_id:s.self.value.id,comment:"",rating:0},e.success.value=!1)}catch(c){console.error("Failed to save review:",c)}};return(c,p)=>{var _,y;return n(),r("div",z,[F(t("textarea",{class:"w-full mx-auto bg-white rounded-3xl p-4 text-black font-bold","onUpdate:modelValue":p[0]||(p[0]=o=>l(e).self.value.comment=o),placeholder:`Review ${(_=l(s).self.value)==null?void 0:_.name}...`},null,8,A),[[P,l(e).self.value.comment]]),t("div",K,[t("div",Q,[(n(!0),r(h,null,x(l(e).self.value.rating,(o,d)=>(n(),r("i",{key:d,class:"pi pi-star-fill text-xl text-amber-500 cursor-pointer hover:scale-105",onClick:D=>i(o)},null,8,W))),128)),(n(!0),r(h,null,x(5-l(e).self.value.rating,(o,d)=>(n(),r("i",{key:d,class:"pi pi-star text-xl text-amber-500 cursor-pointer hover:scale-105",onClick:D=>i(l(e).self.value.rating+o)},null,8,X))),128))]),t("button",{class:"bg-amber-400 text-black font-bold rounded px-4 py-2 cursor-pointer",onClick:b,disabled:l(e).self.value.comment===""}," Submit ",8,Z)]),l(e).submitting.value?(n(),r("div",ee,"Posting review...")):w("",!0),l(e).error.value!==null?(n(),r("div",te,u(l(e).error.value),1)):w("",!0),t("div",se,[t("h2",le,u((y=l(s).self.value)==null?void 0:y.reviews.length)+" Reviews",1),t("ul",ae,[a.value.length===0?(n(),r("li",oe,"Leave the first review!")):w("",!0),(n(!0),r(h,null,x(a.value,o=>(n(),r("li",{key:o.id,class:"border border-amber-400 rounded-2xl p-5 mb-4"},[t("div",re,[(n(!0),r(h,null,x(o.rating,d=>(n(),r("i",{key:d,class:"pi pi-star-fill text-xl text-amber-500"}))),128))]),t("p",ne,u(o.comment),1)]))),128))])])])}}}),ue={class:"p-2 md:p-8 text-yellow-400 font-sans w-full"},de=k({__name:"CharacterView",setup(f){return(s,a)=>(n(),r("div",ue,[$(Y),$(ie)]))}});export{de as default};
